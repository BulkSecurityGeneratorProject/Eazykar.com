<div id="forms" class="page-layout simple fullwidth" fxLayout="column">
    <div class="content p-16">

        <div class="h1 pt-16 pl-24">
            My Profile
        </div>

        <p class="pb-16 pl-24">
            Please update your profile information
        </p>

        <mat-tab-group dynamicHeight="true">

            <mat-tab>
                <ng-template mat-tab-label>
                    <div class="h4">Personal Information</div>
                </ng-template>
                <div class="p-24">
                    <form fxLayout="column" [formGroup]="personalInformationForm" (ngSubmit)="savePersonalInformation()">

                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>First Name</mat-label>
                                <input matInput formControlName="firstName" required>
                                <mat-icon matSuffix>person_outline</mat-icon>
                                <mat-error>First Name is required!</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>Middle Name</mat-label>
                                <input matInput formControlName="middleName">
                                <mat-icon matSuffix>person_outline</mat-icon>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>Last Name</mat-label>
                                <input matInput formControlName="lastName" required>
                                <mat-icon matSuffix>person_outline</mat-icon>
                                <mat-error>Last Name is required!</mat-error>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                            <mat-form-field appearance="outline" class="p-4" fxFlex="67">
                                <mat-label>Father's Name</mat-label>
                                <input matInput formControlName="fathersName">
                                <mat-icon matSuffix>person_outline</mat-icon>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>Gender</mat-label>
                                <mat-select formControlName="gender" required>
                                    <mat-option>
                                        - Please select -
                                    </mat-option>
                                    <mat-option [value]="'MALE'">
                                        Male
                                    </mat-option>
                                    <mat-option [value]="'FEMALE'">
                                        Female
                                    </mat-option>
                                </mat-select>
                                <mat-icon matSuffix class="secondary-text">people</mat-icon>
                                <mat-error>Selection is required!</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>Date of Birth</mat-label>
                                <input matInput [matDatepicker]="dp3" formControlName="dateOfBirth" disabled required>
                                <mat-datepicker-toggle matSuffix [for]="dp3">
                                    <!--<mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>-->
                                </mat-datepicker-toggle>
                                <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                                <mat-hint>e.g. 31/12/1990</mat-hint>
                            </mat-form-field>

                            <mat-form-field appearance="outline" class="p-4" fxFlex="100">
                                <mat-label>Marital Status</mat-label>
                                <mat-select formControlName="maritalStatus">
                                    <mat-option>
                                        - Please select -
                                    </mat-option>
                                    <mat-option [value]="'BACHELOR'">
                                        Bachelor
                                    </mat-option>
                                    <mat-option [value]="'MARRIED'">
                                        Married
                                    </mat-option>
                                    <mat-option [value]="'DIVORCED'">
                                        Divorced
                                    </mat-option>
                                    <mat-option [value]="'PREFER_NOT_TO_DISCLOSE'">
                                        Prefer not to disclose
                                    </mat-option>
                                </mat-select>
                                <mat-icon matSuffix class="secondary-text">supervisor_account</mat-icon>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <mat-form-field appearance="outline" class="p-4" fxFlex="67">
                                <mat-label>Mobile Number</mat-label>
                                <input matInput formControlName="mobileNumber">
                                <mat-icon matSuffix>contact_phone</mat-icon>
                            </mat-form-field>
                            <mat-form-field appearance="outline" class="p-4" fxFlex="67">
                                <mat-label>Primary Email</mat-label>
                                <input matInput formControlName="email">
                                <mat-icon matSuffix>alternate_email</mat-icon>
                            </mat-form-field>
                            <mat-form-field appearance="outline" class="p-4" fxFlex="67">
                                <mat-label>Secondary Email</mat-label>
                                <input matInput formControlName="secondaryEmail">
                                <mat-icon matSuffix>alternate_email</mat-icon>
                            </mat-form-field>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button mat-raised-button type="submit" color="accent" [disabled]="!personalInformationForm.valid">
                                {{ isSaving ? 'Saving...' : 'Save My Personal Information' }}
                            </button>
                            <mat-spinner *ngIf="isSaving"></mat-spinner>
                        </div>

                    </form>
                </div>
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <div class="h4">Address</div>
                </ng-template>
                <div class="p-24">
                    <form fxLayout="column" fxLayoutAlign="start"
                          (ngSubmit)="saveAddressInformation()"
                          fxFlex="1 0 auto" name="form" [formGroup]="addressForm">


                        <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
                                <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                    <mat-label>Flat / Door / Block Number</mat-label>
                                    <input matInput formControlName="line1" required>
                                    <mat-icon matSuffix class="secondary-text">my_location</mat-icon>
                                    <mat-error>Flat/Door/Block Number is required!</mat-error>
                                </mat-form-field>
                                <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                    <mat-label>Area</mat-label>
                                    <input matInput formControlName="line3">
                                    <mat-icon matSuffix class="secondary-text">location_searching</mat-icon>
                                </mat-form-field>
                            </div>
                            <div fxLayout="row wrap" fxLayoutAlign="start center" fxFlex="1 0 auto">
                                <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                    <mat-label>Road / Street</mat-label>
                                    <input matInput formControlName="line2">
                                    <mat-icon matSuffix class="secondary-text">location_on</mat-icon>
                                </mat-form-field>
                                <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                    <mat-label>Locality</mat-label>
                                    <input matInput formControlName="line4">
                                    <mat-icon matSuffix class="secondary-text">explore</mat-icon>
                                </mat-form-field>
                            </div>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">

                            <mat-form-field class="p-4" appearance="outline" fxFlex="33">
                                <mat-label>City</mat-label>
                                <input matInput formControlName="city" required>
                                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
                                <mat-error>City is required!</mat-error>
                            </mat-form-field>

                            <mat-form-field class="p-4" appearance="outline" fxFlex="34">
                                <mat-label>State</mat-label>
                                <input matInput formControlName="state" required>
                                <mat-icon matSuffix class="secondary-text">location_city</mat-icon>
                                <mat-error>State is required!</mat-error>
                            </mat-form-field>

                            <mat-form-field class="p-4" appearance="outline" fxFlex="33">
                                <mat-label>Postal Code</mat-label>
                                <input matInput #postalCode formControlName="postalCode" maxlength="6" required>
                                <mat-icon matSuffix class="secondary-text">markunread_mailbox</mat-icon>
                                <!--<mat-hint align="end">{{postalCode.value.length}} / 5</mat-hint>-->
                                <mat-error>Postal Code is required!</mat-error>
                            </mat-form-field>

                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>Country</mat-label>
                                <mat-select formControlName="country" required>
                                    <mat-option [value]="'United States of America'">
                                        United States of America
                                    </mat-option>
                                    <mat-option [value]="'United Kingdom'">
                                        United Kingdom
                                    </mat-option>
                                    <mat-option [value]="'Russia'">
                                        Russia
                                    </mat-option>
                                    <mat-option [value]="'China'">
                                        China
                                    </mat-option>
                                    <mat-option [value]="'Japan'">
                                        Japan
                                    </mat-option>
                                    <mat-option [value]="'India'">
                                        India
                                    </mat-option>
                                </mat-select>
                                <mat-icon matSuffix class="secondary-text">outlined_flag</mat-icon>
                                <mat-error>Country is required!</mat-error>
                            </mat-form-field>

                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button class="mr-8" mat-raised-button type="submit" color="accent" [disabled]="!addressForm.valid">
                                {{ isSaving ? 'Saving...' : 'Save My Address' }}
                            </button>
                        </div>

                    </form>
                </div>
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <div class="h4">Key Information</div>
                </ng-template>
                <div class="p-24">
                    <form fxLayout="column" [formGroup]="keyInformationForm" (ngSubmit)="saveKeyInformation()">
                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>PAN #</mat-label>
                                <input matInput formControlName="panNumber" required>
                                <mat-error *ngIf="keyInformationForm.controls.panNumber.hasError('required')">PAN # is required!</mat-error>
                                <mat-error *ngIf="keyInformationForm.controls.panNumber.hasError('pattern')">PAN # format is not valid</mat-error>
                            </mat-form-field>
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>Aadhar #</mat-label>
                                <input matInput formControlName="aadharNumber">
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>Bank A/c #</mat-label>
                                <input matInput formControlName="bankAccountNumber">
                            </mat-form-field>
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>IFSC Code</mat-label>
                                <input matInput formControlName="ifscCode">
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="1 0 auto">
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>Bank Name</mat-label>
                                <input matInput formControlName="bankName">
                            </mat-form-field>
                            <mat-form-field class="p-4" appearance="outline" fxFlex="100">
                                <mat-label>Branch</mat-label>
                                <input matInput formControlName="bankBranch">
                            </mat-form-field>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="center center">
                            <button class="mr-8" mat-raised-button type="submit" color="accent" [disabled]="!keyInformationForm.valid">
                                {{ isSaving ? 'Saving...' : 'Save My Key Information' }}
                            </button>
                        </div>

                    </form>
                </div>
            </mat-tab>

        </mat-tab-group>

    </div>
</div>
